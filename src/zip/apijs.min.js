/*!
 * Copyright 2008-2013 | Fabrice Creuzot (luigifab) <code~luigifab~fr>
 * https://www.luigifab.fr/apijs - 4.2.0
 * This program is free software, you can redistribute it or modify
 * it under the terms of the GNU General Public License (GPL).
 */
function str_shuffle(e){for(var t,i="";0<e.length;)i+=e[t=Math.floor(Math.random()*e.length)],e=e.substring(0,t)+e.substr(t+1);return i}function in_array(e,t){var i=null;if(e instanceof Array){for(i in e)if(e.hasOwnProperty(i)&&in_array(e[i],t))return!0}else for(i in t)if(t.hasOwnProperty(i)&&!isNaN(i)&&t[i]===e)return!0;return!1}Function.prototype.hasOwnProperty("bind")||(Function.prototype.bind=function(e){var t=this,i=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,0===i.length?arguments:0===arguments.length?i:i.concat(Array.prototype.slice.call(arguments,0)))}});var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"an unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var t,i,n=0;n<e.length;n++)if(t=e[n].string,i=e[n].prop,this.versionSearchString=e[n].versionSearch||e[n].identity,t){if(-1!==t.indexOf(e[n].subString))return e[n].identity}else if(i)return e[n].identity},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);return-1===t?void 0:parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Internet Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();var apijs={core:{},config:{lang:"auto",debug:!1,debugkey:!1,navigator:!0,transition:!0,dialog:{closeOnClic:!1,restrictNavigation:!0,savingDialog:!1,savingTime:700,margin:25,emotes:!0,showLoader:!0,showFullsize:!1,savePhoto:!0,saveVideo:!0,videoAutoplay:!0,videoWidth:640,videoHeight:480,imagePrev:null,imageNext:null,imageClose:null,imageUpload:{src:"./images/dialog/progress3.svg.php",width:300,height:17},filePhoto:"./downloadfile.php",fileVideo:"./downloadfile.php",fileUpload:"./uploadfile.php"},slideshow:{ids:"diaporama"},bbcode:{"(a)":{src:"./images/icons/emotes/gnome-face-angel.png",width:16,height:16},"(@)":{src:"./images/icons/emotes/gnome-face-angry.png",width:16,height:16},"(k)":{src:"./images/icons/emotes/gnome-face-kiss.png",width:16,height:16},lol:{src:"./images/icons/emotes/gnome-face-laugh.png",width:16,height:16},"':(":{src:"./images/icons/emotes/gnome-face-crying.png",width:16,height:16},":$":{src:"./images/icons/emotes/gnome-face-embarrassed.png",width:16,height:16},":|":{src:"./images/icons/emotes/gnome-face-plain.png",width:16,height:16},":/":{src:"./images/icons/emotes/gnome-face-uncertain.png",width:16,height:16},":(":{src:"./images/icons/emotes/gnome-face-sad.png",width:16,height:16},":)":{src:"./images/icons/emotes/gnome-face-smile.png",width:16,height:16},";)":{src:"./images/icons/emotes/gnome-face-wink.png",width:16,height:16},":p":{src:"./images/icons/emotes/gnome-face-raspberry.png",width:16,height:16},":D":{src:"./images/icons/emotes/gnome-face-smile-big.png",width:16,height:16},":o":{src:"./images/icons/emotes/gnome-face-surprise.png",width:16,height:16},":s":{src:"./images/icons/emotes/gnome-face-worried.png",width:16,height:16}}}};function startApijs(){if(apijs.config.navigator)for(var e=document.querySelectorAll("a.popup"),t=0;t<e.length;t++)e[t].addEventListener("click",openTab,!1);else for(e=document.querySelectorAll("a.popup"),t=0;t<e.length;t++)e[t].setAttribute("onclick","window.open(this.href); return false;");"string"!=typeof document.body.style.transitionDuration&&"string"!=typeof document.body.style.OTransitionDuration&&"string"!=typeof document.body.style.MozTransitionDuration&&"string"!=typeof document.body.style.webkitTransitionDuration&&(apijs.config.transition=!1),"function"==typeof apijs.core.i18n&&"function"==typeof apijs.core.bbcode&&"function"==typeof apijs.core.dialog&&"function"==typeof apijs.core.upload&&"function"==typeof apijs.core.slideshow&&(apijs.i18n=new apijs.core.i18n,"function"==typeof setApijsLang&&setApijsLang(),apijs.i18n.init(),"function"==typeof setApijsConfig&&setApijsConfig(),apijs.dialog=new apijs.core.dialog,apijs.upload=new apijs.core.upload,apijs.slideshow=new apijs.core.slideshow,apijs.slideshow.init())}function openTab(e){e.preventDefault(),window.open(this.href)}function uniqid(){return str_shuffle("958753cfb564e097e2f9121a43da98708727f30365b1da846cc6fae22afe7ebcbda4030bd81f1e4d0615b96358dc294c").substr(0,8)}"function"==typeof window.addEventListener?window.addEventListener("load",startApijs,!1):-1<navigator.userAgent.indexOf("MSIE 8")&&(apijs.config.navigator=!1,apijs.config.transition=!1,document.createElement("video"),window.innerWidth=document.documentElement.clientWidth,window.innerHeight=document.documentElement.clientHeight,window.attachEvent("onload",startApijs)),apijs.core.i18n=function(){this.data=[],this.data.en={buttonOk:"Ok",buttonRetry:"Retry",buttonCancel:"Cancel",buttonConfirm:"Confirm",buttonClose:"Close",buttonPrev:"Previous",buttonNext:"Next",downloadLink:"Download",operationTooLong:"This operation is too long ? ",warningLostChange:"Warning: all changes in progress will be lost.",reloadLink:"Reload this page",operationInProgress:"Operation in progress...",uploadInProgress:"Upload in progress...",savingInProgress:"Saving...",uploadTime:"§% (§)",uploadRate:"§% (§ KB/s)",uploadRateTime:"§% (§ KB/s - §)",uploadAllType:"All files are accepted.[br]Maximum size: § [abbr title='Megabyte']MB[/abbr]",uploadOneType:"Accepted file format: §[br]Maximum size: § [abbr title='Megabyte']MB[/abbr]",uploadMultiType:"Accepted file formats: § and §[br]Maximum size: § [abbr title='Megabyte']MB[/abbr]",uploadBadOneType:"[p]It's impossible to send the file because the file format proposed isn't allowed.[/p][p]➩ Proposed file: [strong]§[/strong][br]➩ Accepted file format: §[/p]",uploadBadMultiType:"[p]It's impossible to send the file because the file format proposed isn't allowed.[/p][p]➩ Proposed file: [strong]§[/strong][br]➩ Accepted file formats: § and §[/p]",uploadBadSize:"[p]It's impossible to send the file because the file size is too large.[/p][p]➩ Proposed file: [strong]§[/strong][br]➩ File size: § (§ maximum)[/p]",uploadBadSizeDecimal:".",uploadBadSizeK:"§ KB",uploadBadSizeM:"§ MB",deleteNotFound:"Unfortunately, it's currently impossible to delete requested file (Error §: §).",browserNoVideo:"[p]Your browser [strong]§ §[/strong] doesn't support the <video> tag.[br]To watch this video, you need to upgrade your browser.[/p][ul][li][a href='http://www.google.com/chrome?hl=en' class='popup']Chrome 4.0+[/a][/li][li][a href='http://www.mozilla-europe.org/en/firefox/' class='popup']Firefox 3.5+[/a][/li][li][a href='http://windows.microsoft.com/en-US/internet-explorer/products/ie/home' class='popup']Internet Explorer 9.0+[/a][/li][li][a href='http://www.opera.com/' class='popup']Opera 10.50+[/a][/li][li][a href='http://www.apple.com/safari/' class='popup']Safari 4.0+[/a][/li][/ul][p]It is also possible that the <video> tag is supported, but the codec used by the video (§) does not.[/p][p class='navigator']Your browser identifies itself as: §[/p]",debugInvalidCall:"(debug) Invalid call",debugInvalidUse:"(debug) Invalid use",debugUnknownAction:"(debug) Unknown action",debugKeyDetected:"(debug) Key detected",debugKeyCode:"Code of the seizure key: §",debugInvalidConfig:"(debug) Invalid configuration",debugNotRecognizedConfig:"Image configuration wasn't recognized.",debugNotExist:"doesn't exist (unlikely error)",debugBadUse:"The upload dialog must be called with apijs.upload.sendFile()."},this.data.fr={buttonOk:"Ok",buttonRetry:"Réessayer",buttonCancel:"Annuler",buttonConfirm:"Valider",buttonClose:"Fermer",buttonPrev:"Précédent",buttonNext:"Suivant",downloadLink:"Télécharger",operationTooLong:"Cette opération prend trop de temps ? ",warningLostChange:"Attention : toutes les modifications en cours seront perdues.",reloadLink:"Rechargez la page",operationInProgress:"Opération en cours...",uploadInProgress:"Envoi du fichier en cours...",savingInProgress:"Enregistrement en cours...",uploadTime:"§% (§)",uploadRate:"§% (§ Ko/s)",uploadRateTime:"§% (§ Ko/s - §)",uploadAllType:"Tous les fichiers sont acceptés.[br]Taille maximale : § [abbr title='Mégaoctet']Mo[/abbr]",uploadOneType:"Format de fichier accepté : §[br]Taille maximale : § [abbr title='Mégaoctet']Mo[/abbr]",uploadMultiType:"Formats de fichier acceptés : § et §[br]Taille maximale : § [abbr title='Mégaoctet']Mo[/abbr]",uploadBadOneType:"[p]Il est impossible d'envoyer le fichier car le format du fichier proposé n'est pas autorisé.[/p][p]➩ Fichier proposé : [strong]§[/strong][br]➩ Format de fichier accepté : §[/p]",uploadBadMultiType:"[p]Il est impossible d'envoyer le fichier car le format du fichier proposé n'est pas autorisé.[/p][p]➩ Fichier proposé : [strong]§[/strong][br]➩ Formats de fichier acceptés : § et §[/p]",uploadBadSize:"[p]Il est impossible d'envoyer le fichier car la taille du fichier proposé est trop importante.[/p][p]➩ Fichier proposé : [strong]§[/strong][br]➩ Taille du fichier : § (§ maximum)[/p]",uploadBadSizeDecimal:",",uploadBadSizeK:"§ Ko",uploadBadSizeM:"§ Mo",deleteNotFound:"Malheureusement, il est actuellement impossible de supprimer le fichier demandé (Erreur § : [span xml:lang='en']§[/span]).",browserNoVideo:"[p]Votre navigateur [strong]§ §[/strong] ne supporte pas la balise <video>.[br]Pour voir cette vidéo, vous devez mettre à jour votre navigateur.[/p][ul][li][a href='http://www.google.com/chrome?hl=fr' class='popup']Chrome 4.0+[/a][/li][li][a href='http://www.mozilla-europe.org/fr/firefox/' class='popup']Firefox 3.5+[/a][/li][li][a href='http://windows.microsoft.com/fr-FR/internet-explorer/products/ie/home' class='popup']Internet Explorer 9.0+[/a][/li][li][a href='http://www.opera.com/' class='popup']Opera 10.50+[/a][/li][li][a href='http://www.apple.com/fr/safari/' class='popup']Safari 4.0+[/a][/li][/ul][p]Il se peut également que la balise <video> soit supportée, mais que le codec utilisé par la vidéo (§) ne le soit pas.[/p][p class='navigator']Votre navigateur s'identifie en tant que : §[/p]",debugInvalidCall:"(debug) Appel invalide",debugInvalidUse:"(debug) Utilisation invalide",debugUnknownAction:"(debug) Action inconnue",debugKeyDetected:"(debug) Touche détectée",debugKeyCode:"Code de la touche saisie : §",debugInvalidConfig:"(debug) Configuration invalide",debugNotRecognizedConfig:"La configuration de l'image n'a pas été reconnue.",debugNotExist:"n'existe pas (erreur improbable)",debugBadUse:"Le dialogue d'upload doit être appelé via apijs.upload.sendFile()."},this.init=function(){var e;-1<apijs.config.lang.indexOf("auto")&&(document.getElementsByTagName("html")[0].getAttribute("xml:lang")?e=document.getElementsByTagName("html")[0].getAttribute("xml:lang").slice(0,2):document.getElementsByTagName("html")[0].getAttribute("lang")&&(e=document.getElementsByTagName("html")[0].getAttribute("lang").slice(0,2)),"string"==typeof e&&this.data.hasOwnProperty(e)?apijs.config.lang=e:-1<apijs.config.lang.indexOf("auto-")&&(apijs.config.lang=apijs.config.lang.slice(5))),this.data.hasOwnProperty(apijs.config.lang)||(apijs.config.lang="en")},this.translate=function(e){var t=apijs.config.lang;if("string"!=typeof this.data[t][e]){if("en"===t||"string"!=typeof this.data.en[e])return e;t="en"}if(1<arguments.length){for(var i=0,n=1,a="",s=this.data[t][e].split("§");i<s.length;i++)a+=n<arguments.length?s[i]+arguments[n++]:s[i];return a}return this.data[t][e]},this.changeLang=function(e){return-1<e.indexOf("auto")?(apijs.config.lang=e,this.init(),!0):!("string"!=typeof e||!this.data.hasOwnProperty(e))&&(apijs.config.lang=e,!0)}},apijs.core.bbcode=function(){this.bbcode=null,this.object=null,this.fragment=null,this.emotes=!1,this.init=function(e,t){this.object={tag:"div",content:[]},this.object.class="bbcode",this.bbcode="["!==e[0]?"[p]"+e+"[/p]":e,this.bbcode=this.bbcode.replace(/\\\]/g,"]"),null!==apijs.config.bbcode&&"object"==typeof apijs.config.bbcode&&(this.emotes="boolean"!=typeof t||t)},this.getFragment=function(){return this.readData(this.bbcode,0),this.fragment=document.createDocumentFragment(),this.fragment.appendChild(this.createDomFragment(this.object)),this.fragment},this.readData=function(e,t){var i,n,a,s,o;"["!==e[0]&&-1<(o=e.search(/\[([a-z1-6]+)(?: [a-z:]+=["'][^\]]*["'])*\]/))?(a=e.slice(0,o),this.readData(a,t),-1<(o=(s=e.slice(o)).indexOf("[/"+RegExp.$1+"]"))&&(i=s.slice(0,o+RegExp.$1.length+3),s=s.slice(o+RegExp.$1.length+3),this.readData(i,t)),/^(\[(?:area|br|col|hr|iframe|img|input|param)(?: [a-z:]+=["'][^\]]*["'])*\])/.test(s)&&(i=s.slice(0,RegExp.$1.length),s=s.slice(RegExp.$1.length),this.readData(i,t)),0<s.length&&this.readData(s,t)):/^\[(area|br|col|hr|iframe|img|input|param)((?: [a-z:]+=["'][^\]]*["'])*)\]/.test(e)?(i=RegExp.$1,n=RegExp.$2,s=e.slice(2+i.length+n.length),this.addElement(i,n,t),0<s.length&&this.readData(s,t)):/^\[([a-z1-6]+)((?: [a-z:]+=["'][^\]]*["'])*)\]/.test(e)?(i=RegExp.$1,n=RegExp.$2,o=e.indexOf("[/"+i+"]"),a=e.slice(2+i.length+n.length,o),s=e.slice(3+i.length+o),this.addElement(i,n,t),this.readData(a,t+1),0<s.length&&this.readData(s,t)):this.addElement(e,null,t)},this.addElement=function(e,t,i){var n,a,s,o=!1,l={},r=this.getContentNode(this.object,0,i);if(null!==t){if(r.hasOwnProperty("content")?r.content.push({tag:e}):r.content=[{tag:e}],5<t.length)for(n in t=t.slice(1,-1).split(/["'] /))t.hasOwnProperty(n)&&(a=t[n].slice(0,t[n].indexOf("=")),s=t[n].slice(t[n].indexOf("=")+2),r.hasOwnProperty("content")?r.content[r.content.length-1][a]=s:r[a]=s)}else if(this.emotes){for(s in e=e.split(" "))e.hasOwnProperty(s)&&"string"==typeof e[s]&&(apijs.config.bbcode.hasOwnProperty(e[s])?(o=!0,l=apijs.config.bbcode[e[s]],e[s]='[img src="'+l.src+'" width="'+l.width+'" height="'+l.height+'" alt="'+e[s]+'" class="emote"]'):apijs.config.bbcode.hasOwnProperty(e[s].slice(0,-1))&&(o=!0,l=apijs.config.bbcode[e[s].slice(0,-1)],e[s]='[img src="'+l.src+'" width="'+l.width+'" height="'+l.height+'" alt="'+e[s].slice(0,-1)+'" class="emote"]'+e[s].slice(-1)));e=e.join(" "),o?this.readData(e,i):r.hasOwnProperty("content")?r.content.push({text:e}):r.content=[{text:e}]}else r.hasOwnProperty("content")?r.content.push({text:e}):r.content=[{text:e}]},this.getContentNode=function(e,t,i){if(e.content.length<1||i<1)return e;var n=e.content.length-1;return e.content[n].hasOwnProperty("content")&&++t<i?this.getContentNode(e.content[n],t,i):e.content[n]},this.createDomFragment=function(e){var t,i,n;if(!e.hasOwnProperty("tag"))return document.createTextNode(e.text);for(i in t=document.createElement(e.tag),e)e.hasOwnProperty(i)&&("text"===i&&t.appendChild(document.createTextNode(e[i])),"tag"!==i&&"text"!==i&&"content"!==i&&t.setAttribute(i,e[i]),"a"===e.tag&&"class"===i&&-1<e[i].indexOf("popup")&&(apijs.config.navigator?t.addEventListener("click",openTab,!1):t.setAttribute("onclick","window.open(this.href); return false;")));if(e.hasOwnProperty("content"))for(n=0;n<e.content.length;n++)t.appendChild(this.createDomFragment(e.content[n]));return t}},apijs.core.dialog=function(){this.classNames=null,this.image=null,this.imageSize=null,this.videoPlaying=!1,this.timer=null,this.timerbis=null,this.callback=null,this.callbackParam=null,this.fragment=null,this.elemA=null,this.elemB=null,this.elemC=null,this.elemD=null,this.dialogInformation=function(e,t,i){"string"==typeof e&&"string"==typeof t?(this.setupDialog("information",i),this.htmlParent(!1),this.htmlTitle(e),this.htmlText(t),this.htmlButtonOk(),this.showDialog(),document.getElementById("box").lastChild.firstChild.focus()):apijs.config.debug&&this.dialogInformation(apijs.i18n.translate("debugInvalidCall"),"[pre]TheDialog » dialogInformation[br]➩ (string) title : "+e+"[br]➩ (string) text : "+t+"[br]➩ (string) icon : "+i+"[/pre]")},this.dialogConfirmation=function(e,t,i,n,a){"string"==typeof e&&"string"==typeof t&&"function"==typeof i?(this.setupDialog("confirmation",a),this.htmlParent(!1),this.htmlTitle(e),this.htmlText(t),this.htmlButtonConfirm("button"),this.callback=i,this.callbackParam=n,this.showDialog(),document.getElementById("box").lastChild.firstChild.focus()):apijs.config.debug&&("function"==typeof i&&"string"==typeof i.name&&0<i.name.length&&(i=i.name),this.dialogInformation(apijs.i18n.translate("debugInvalidCall"),"[pre]TheDialog » dialogConfirmation[br]➩ (string) title : "+e+"[br]➩ (string) text : "+t+"[br]➩ (function) callback : "+i+"[br]➩ (mixed) callbackParam : "+n+"[br]➩ (string) icon : "+a+"[/pre]"))},this.dialogFormOptions=function(e,t,i,n,a,s){"string"==typeof e&&"string"==typeof t&&"string"==typeof i&&"function"==typeof n?(this.setupDialog("options",s),this.htmlFormParent(i),this.htmlTitle(e),this.htmlText(t),this.htmlButtonConfirm("submit"),this.callback=n,this.callbackParam=a,this.showDialog()):apijs.config.debug&&("function"==typeof n&&"string"==typeof n.name&&0<n.name.length&&(n=n.name),this.dialogInformation(apijs.i18n.translate("debugInvalidCall"),"[pre]TheDialog » dialogFormOptions[br]➩ (string) title : "+e+"[br]➩ (string) text : "+t+"[br]➩ (string) action : "+i+"[br]➩ (function) callback : "+n+"[br]➩ (mixed) callbackParam : "+a+"[br]➩ (string) icon : "+s+"[/pre]"))},this.dialogFormUpload=function(e,t,i,n,a){"string"==typeof e&&"string"==typeof t&&"string"==typeof n&&"string"==typeof i?(this.setupDialog("upload",a),this.htmlFormParent(apijs.config.dialog.fileUpload,"multipart/form-data","iframeUpload."+n),this.htmlTitle(e),this.htmlText(t),this.htmlFormUpload(i,n),this.htmlButtonConfirm("submit"),this.showDialog(),window.setTimeout(function(){document.getElementById("box").getElementsByTagName("input")[1].focus()},10)):apijs.config.debug&&this.dialogInformation(apijs.i18n.translate("debugInvalidCall"),"[pre]TheDialog » dialogFormUpload[br]➩ (string) title : "+e+"[br]➩ (string) text : "+t+"[br]➩ (string) inputname : "+i+"[br]➩ (string) uploadkey : "+n+"[br]➩ (string) icon : "+a+"[/pre]")},this.dialogProgress=function(e,t,i){"string"==typeof e&&"string"==typeof t?(this.setupDialog("progress",i),this.htmlParent(!1),this.htmlTitle(e),this.htmlText(t),this.htmlProgressBar(),this.showDialog()):apijs.config.debug&&this.dialogInformation(apijs.i18n.translate("debugInvalidCall"),"[pre]TheDialog » dialogProgress[br]➩ (string) title : "+e+"[br]➩ (string) text : "+t+"[br]➩ (string) icon : "+i+"[/pre]")},this.dialogWaiting=function(e,t,i,n,a){"string"==typeof e&&"string"==typeof t?(this.setupDialog("waiting",a),this.htmlParent(!1),this.htmlTitle(e),this.htmlText(t),this.showDialog(),!1!==n&&(this.timer=window.setTimeout(apijs.dialog.htmlLinkReload.bind(this),"number"==typeof i?i:1e4))):apijs.config.debug&&this.dialogInformation(apijs.i18n.translate("debugInvalidCall"),"[pre]TheDialog » dialogWaiting[br]➩ (string) title : "+e+"[br]➩ (string) text : "+t+"[br]➩ (number) time : "+i+"[br]➩ (boolean) nolink : "+n+"[br]➩ (string) icon : "+a+"[/pre]")},this.dialogPhoto=function(e,t,i,n,a,s,o){"number"==typeof e&&"number"==typeof t&&"string"==typeof i&&"string"==typeof n&&"string"==typeof a&&"string"==typeof s?("string"==typeof o&&0<o.length?(this.setupDialog("photo slideshow"),this.htmlParent(o)):(this.setupDialog("photo"),this.htmlParent(!1)),this.htmlPhoto(e,t,i,n,a,s),this.htmlButtonClose(),this.htmlButtonNavigation(),this.showDialog(),this.loadImage(e,t,i)):apijs.config.debug&&this.dialogInformation(apijs.i18n.translate("debugInvalidCall"),"[pre]TheDialog » dialogPhoto[br]➩ (number) width : "+e+"[br]➩ (number) height : "+t+"[br]➩ (string) url : "+i+"[br]➩ (string) name : "+n+"[br]➩ (string) date : "+a+"[br]➩ (string) legend : "+s+"[/pre]")},this.dialogVideo=function(e,t,i,n,a){"string"==typeof e&&"string"==typeof t&&"string"==typeof n&&"string"==typeof n?("string"==typeof a&&0<a.length?(this.setupDialog("video slideshow"),this.htmlParent(a)):(this.setupDialog("video"),this.htmlParent(!1)),this.htmlVideo(e,t,i,n),this.htmlButtonClose(),this.htmlButtonNavigation(),this.showDialog()):apijs.config.debug&&this.dialogInformation(apijs.i18n.translate("debugInvalidCall"),"[pre]TheDialog » dialogVideo[br]➩ (string) url : "+e+"[br]➩ (string) name : "+t+"[br]➩ (string) date : "+i+"[br]➩ (string) legend : "+n+"[/pre]")},this.actionClose=function(e){e?(apijs.dialog.deleteDialog(!0),apijs.dialog.showPage()):apijs.dialog.deleteDialog(!1)},this.actionCloseOnClic=function(e){var t=apijs.dialog.classNames.split(" ");"dialog"!==e.target.getAttribute("id")||in_array(["waiting","progress","lock"],t)||(apijs.dialog.deleteDialog(!0),apijs.dialog.showPage())},this.actionConfirm=function(){var e=!1;return-1<this.classNames.indexOf("confirmation")?(this.classNames+=" lock",apijs.config.dialog.savingDialog?this.dialogWaiting(document.getElementById("box").querySelector("h1").firstChild.nodeValue,apijs.i18n.translate("operationInProgress"),!0,!0,this.classNames.replace("confirmation","").replace("lock","")):(this.elemA=document.createElement("p"),this.elemA.setAttribute("class","saving"),this.elemA.appendChild(document.createTextNode(apijs.i18n.translate("operationInProgress"))),document.getElementById("box").removeChild(document.getElementById("box").lastChild),document.getElementById("box").lastChild.setAttribute("class","novisible"),document.getElementById("box").appendChild(this.elemA),this.timer=window.setTimeout(apijs.dialog.htmlLinkReload.bind(this),1e4)),500<apijs.config.dialog.savingTime?this.timerbis=window.setTimeout(function(){"function"==typeof this.callback&&(this.classNames=this.classNames.replace("lock",""),this.callback(this.callbackParam))}.bind(this),apijs.config.dialog.savingTime):(this.classNames=this.classNames.replace("lock",""),this.callback(this.callbackParam)),e=!0):-1<this.classNames.indexOf("options")?!0===this.callback(this.callbackParam)&&(this.classNames+=" lock",this.elemA=document.createElement("p"),this.elemA.setAttribute("class","saving"),this.elemA.appendChild(document.createTextNode(apijs.i18n.translate("operationInProgress"))),document.getElementById("box").removeChild(document.getElementById("box").lastChild),document.getElementById("box").lastChild.setAttribute("class","novisible"),document.getElementById("box").appendChild(this.elemA),this.timer=window.setTimeout(apijs.dialog.htmlLinkReload.bind(this),1e4),500<apijs.config.dialog.savingTime?this.timerbis=window.setTimeout(function(){document.getElementById("box")&&"form"===document.getElementById("box").nodeName.toLowerCase()&&(this.classNames=this.classNames.replace("lock",""),document.getElementById("box").submit())}.bind(this),apijs.config.dialog.savingTime):e=!0):-1<this.classNames.indexOf("upload")&&("function"==typeof apijs.core.upload?apijs.upload.extensions instanceof Array&&!0===apijs.upload.actionConfirm()?(this.classNames+=" lock",e=!0):apijs.upload.extensions instanceof Array||!apijs.config.debug||this.dialogInformation(apijs.i18n.translate("debugInvalidUse"),"[pre]TheDialog » actionConfirm[br]➩ "+apijs.i18n.translate("debugBadUse")+"[/pre]"):apijs.config.debug&&this.dialogInformation(apijs.i18n.translate("debugInvalidUse"),"[pre]TheDialog » actionConfirm[br]➩ TheUpload "+apijs.i18n.translate("debugNotExist")+"[/pre]")),e},this.actionKey=function(e){var t=apijs.dialog.classNames.split(" ");apijs.config.debugkey?(e.preventDefault(),apijs.dialog.dialogInformation(apijs.i18n.translate("debugKeyDetected"),"[pre]TheDialog » actionKey[br]"+apijs.i18n.translate("debugKeyCode",e.keyCode)+"[/pre]")):in_array("slideshow",t)?27===e.keyCode?(e.preventDefault(),apijs.dialog.actionClose(!0)):35===e.keyCode?(e.preventDefault(),apijs.slideshow.actionLast()):36===e.keyCode?(e.preventDefault(),apijs.slideshow.actionFirst()):37===e.keyCode?(e.preventDefault(),apijs.slideshow.actionPrev()):39===e.keyCode&&(e.preventDefault(),apijs.slideshow.actionNext()):in_array(["waiting","progress","lock"],t)?(e.ctrlKey&&(81===e.keyCode||87===e.keyCode||82===e.keyCode||115===e.keyCode||116===e.keyCode)||e.altKey&&115===e.keyCode||27===e.keyCode||116===e.keyCode)&&e.preventDefault():27===e.keyCode&&(e.preventDefault(),apijs.dialog.actionClose(!0))},this.actionCloseBrowser=function(e){var t=apijs.dialog.classNames.split(" ");if(apijs.config.debugkey&&(e.preventDefault(),apijs.dialog.dialogInformation(apijs.i18n.translate("debugKeyDetected"),"[pre]TheDialog » actionCloseBrowser[br]"+apijs.i18n.translate("debugKeyCode",e.keyCode)+"[/pre]")),in_array(["waiting","progress","lock"],t))return e.preventDefault(),e.stopPropagation(),""},this.actionResizeBrowser=function(){var e={},t={},i=apijs.dialog.imageSize;t.width=parseInt(document.getElementById("topho").getAttribute("width"),10),t.height=parseInt(document.getElementById("topho").getAttribute("height"),10),e.width=Math.round(window.innerWidth-window.innerWidth*apijs.config.dialog.margin/100),e.height=Math.round(window.innerHeight-window.innerHeight*apijs.config.dialog.margin/100),t.width>e.width||t.width<e.width?(t.width=e.width,t.height=Math.round(t.width/i.ratio),t.height>e.height&&(t.height=e.height,t.width=Math.round(t.height*i.ratio))):(t.height>e.height||t.height<e.height)&&(t.height=e.height,t.width=Math.round(t.height*i.ratio),t.width>e.width&&(t.width=e.width,t.height=Math.round(t.width/i.ratio))),(t.width>i.width||isNaN(t.width)||t.width<1||t.height>i.height||isNaN(t.height)||t.height<1)&&(t.width=i.width,t.height=i.height),document.getElementById("box").style.width=t.width+"px",document.getElementById("box").style.marginLeft=Math.round(-(t.width+20)/2)+"px",document.getElementById("box").style.marginTop=Math.round(-(t.height+66)/2)+"px",document.getElementById("topho").setAttribute("width",t.width),document.getElementById("topho").setAttribute("height",t.height),document.getElementById("topho").querySelector("div.bbcode")&&(document.getElementById("topho").querySelector("div.bbcode").style.height=t.height+"px")},this.actionPauseVideo=function(){var e;"boolean"==typeof document.hidden?e=document.hidden:"boolean"==typeof document.mozHidden?e=document.mozHidden:"boolean"==typeof document.msHidden?e=document.msHidden:"boolean"==typeof document.webkitHidden&&(e=document.webkitHidden),e?(apijs.dialog.videoPlaying=!document.getElementById("topho").paused,document.getElementById("topho").pause()):apijs.dialog.videoPlaying&&document.getElementById("topho").play()},this.restrictNavigation=function(e){var t,i=document.querySelectorAll("a,area,button,input,object,select,textarea,iframe");if(e)for(t=0;t<i.length;t++)i[t].setAttribute("tabindex","-1");else for(t=0;t<i.length;t++)i[t].removeAttribute("tabindex")},this.updateWindowSize=function(e,t,i){var n={width:e,height:t,id:i.slice(i.lastIndexOf("/")+1,i.lastIndexOf("."))},i={width:window.innerWidth,height:window.innerHeight};return this.imageSize={width:e,height:t,ratio:e/t},(e>=Math.round(window.innerWidth-window.innerWidth*apijs.config.dialog.margin/100)||t>=Math.round(window.innerHeight-window.innerHeight*apijs.config.dialog.margin/100))&&(i.width-=Math.round(window.innerWidth*apijs.config.dialog.margin/100),i.height-=Math.round(window.innerHeight*apijs.config.dialog.margin/100),n.width>i.width?(n.width=i.width,n.height=Math.round(n.width/this.imageSize.ratio),n.height>i.height&&(n.height=i.height,n.width=Math.round(n.height*this.imageSize.ratio))):n.height>i.height&&(n.height=i.height,n.width=Math.round(n.height*this.imageSize.ratio),n.width>i.width&&(n.width=i.width,n.height=Math.round(n.width/this.imageSize.ratio)))),this.fragment.firstChild.firstChild.style.width=n.width+"px",this.fragment.firstChild.firstChild.style.marginLeft=Math.round(-(n.width+20)/2)+"px",this.fragment.firstChild.firstChild.style.marginTop=Math.round(-(n.height+66)/2)+"px",n},this.searchMimeType=function(e){var t={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",ogv:"video/ogg",webm:"video/webm",mp4:"video/mp4",m4v:"video/mp4"},e=e.slice(e.lastIndexOf(".")+1,0<e.lastIndexOf("#")?e.lastIndexOf("#"):e.length);return t.hasOwnProperty(e)?t[e]:""},this.loadImage=function(e,t,i){apijs.config.navigator&&apijs.config.dialog.showLoader?(this.image=new Image(e,t),this.image.src=i,this.image.addEventListener("load",function(){document.getElementById("topho")&&(document.getElementById("topho").removeAttribute("class"),document.getElementById("topho").setAttribute("src",apijs.dialog.image.src))}.bind(this),!1),this.image.addEventListener("error",function(){window.setTimeout(function(){var e;document.getElementById("topho")&&(-1<document.getElementById("topho").getAttribute("class").indexOf("resized")&&(e=document.getElementById("topho").cloneNode(!0),document.getElementById("topho").parentNode.parentNode.removeChild(document.getElementById("topho").parentNode),document.getElementById("box").firstChild.firstChild.appendChild(e)),apijs.config.dialog.savePhoto&&document.getElementById("box").firstChild.lastChild.removeChild(document.getElementById("box").firstChild.lastChild.lastChild),document.getElementById("topho").setAttribute("class",document.getElementById("topho").getAttribute("class").replace("loading","error")+" "+apijs.config.lang))},750)}.bind(this),!1)):(document.getElementById("topho").removeAttribute("class"),document.getElementById("topho").setAttribute("src",i))},this.setupDialog=function(e,t){null!==this.classNames&&this.deleteDialog(!1),apijs.config.navigator&&(document.addEventListener("keydown",apijs.dialog.actionKey,!0),window.addEventListener("beforeunload",apijs.dialog.actionCloseBrowser,!0),this.restrictNavigation(!0)),this.classNames="string"==typeof t?e+" "+t:e,this.fragment=document.createDocumentFragment()},this.showDialog=function(){var e=this.classNames.split(" ");document.getElementById("dialog")?(this.fragment.firstChild.setAttribute("class",this.fragment.firstChild.getAttribute("class").replace("init","actif")),document.getElementById("dialog").appendChild(this.fragment.firstChild.firstChild)):!apijs.config.transition||in_array("notransition",e)?(this.fragment.firstChild.setAttribute("class",this.fragment.firstChild.getAttribute("class").replace("init","actif")),document.body.appendChild(this.fragment)):(document.body.appendChild(this.fragment),window.setTimeout(function(){document.getElementById("dialog").setAttribute("class",document.getElementById("dialog").getAttribute("class").replace("init","actif"))},1)),apijs.config.navigator&&(apijs.config.dialog.closeOnClic&&!in_array(["waiting","progress","lock"],e)&&document.addEventListener("click",apijs.dialog.actionCloseOnClic,!1),in_array(["photo","video"],e)&&window.addEventListener("resize",apijs.dialog.actionResizeBrowser,!1),in_array("video",e)&&("boolean"==typeof document.hidden?document.addEventListener("visibilitychange",apijs.dialog.actionPauseVideo,!1):"boolean"==typeof document.mozHidden?document.addEventListener("mozvisibilitychange",apijs.dialog.actionPauseVideo,!1):"boolean"==typeof document.msHidden?document.addEventListener("msvisibilitychange",apijs.dialog.actionPauseVideo,!1):"boolean"==typeof document.webkitHidden&&document.addEventListener("webkitvisibilitychange",apijs.dialog.actionPauseVideo,!1)))},this.deleteDialog=function(e){var t=this.classNames.split(" "),i=document.getElementById("topho");this.timer&&clearTimeout(this.timer),apijs.config.navigator&&(document.removeEventListener("keydown",apijs.dialog.actionKey,!0),window.removeEventListener("beforeunload",apijs.dialog.actionCloseBrowser,!0),this.restrictNavigation(!1),i&&"function"==typeof i.pause&&i.pause(),apijs.config.dialog.closeOnClic&&!in_array(["waiting","progress","lock"],t)&&document.removeEventListener("click",apijs.dialog.actionCloseOnClic,!1),in_array(["photo","video"],t)&&window.removeEventListener("resize",apijs.dialog.actionResizeBrowser,!1),in_array("video",t)&&("boolean"==typeof document.hidden?document.removeEventListener("visibilitychange",apijs.dialog.actionPauseVideo,!1):"boolean"==typeof document.mozHidden?document.removeEventListener("mozvisibilitychange",apijs.dialog.actionPauseVideo,!1):"boolean"==typeof document.msHidden?document.removeEventListener("msvisibilitychange",apijs.dialog.actionPauseVideo,!1):"boolean"==typeof document.webkitHidden&&document.removeEventListener("webkitvisibilitychange",apijs.dialog.actionPauseVideo,!1))),!e||apijs.config.transition&&!in_array("notransition",t)?e?(document.getElementById("dialog").setAttribute("class",document.getElementById("dialog").getAttribute("class").replace("actif","deleting")),"string"==typeof document.getElementById("dialog").style.transitionDuration||"string"==typeof document.getElementById("dialog").style.MozTransitionDuration?document.getElementById("dialog").addEventListener("transitionend",function(){document.getElementById("dialog")&&document.getElementById("dialog").parentNode.removeChild(document.getElementById("dialog"))},!1):"string"==typeof document.getElementById("dialog").style.OTransitionDuration?document.getElementById("dialog").addEventListener("OTransitionEnd",function(){document.getElementById("dialog")&&document.getElementById("dialog").parentNode.removeChild(document.getElementById("dialog"))},!1):"string"==typeof document.getElementById("dialog").style.webkitTransitionDuration&&document.getElementById("dialog").addEventListener("webkitTransitionEnd",function(){document.getElementById("dialog")&&document.getElementById("dialog").parentNode.removeChild(document.getElementById("dialog"))},!1)):document.getElementById("box").parentNode.removeChild(document.getElementById("box")):document.getElementById("dialog").parentNode.removeChild(document.getElementById("dialog")),this.classNames=null,this.image=null,this.imageSize=null,this.videoPlaying=!1,this.timer=null,this.fragment=null,this.elemA=null,this.elemB=null,this.elemC=null,this.elemD=null},this.showPage=function(){document.getElementById("iframeUpload")&&document.getElementById("iframeUpload").parentNode.removeChild(document.getElementById("iframeUpload")),this.timerbis&&clearTimeout(this.timerbis),this.timerbis=null,this.callback=null,this.callbackParam=null},this.htmlParent=function(e){this.elemA=document.createElement("div"),this.elemA.setAttribute("class","string"==typeof e?"init "+e:"init"),this.elemA.setAttribute("id","dialog"),this.elemB=document.createElement("div"),this.elemB.setAttribute("class",this.classNames),this.elemB.setAttribute("id","box"),this.elemA.appendChild(this.elemB),this.fragment.appendChild(this.elemA)},this.htmlFormParent=function(e,t,i){this.elemA=document.createElement("div"),this.elemA.setAttribute("class","init"),this.elemA.setAttribute("id","dialog"),this.elemB=document.createElement("form"),this.elemB.setAttribute("action",e),this.elemB.setAttribute("method","post"),"string"==typeof t&&this.elemB.setAttribute("enctype",t),"string"==typeof i&&this.elemB.setAttribute("target",i),this.elemB.setAttribute("onsubmit","return apijs.dialog.actionConfirm();"),this.elemB.setAttribute("class",this.classNames),this.elemB.setAttribute("id","box"),this.elemA.appendChild(this.elemB),this.fragment.appendChild(this.elemA)},this.htmlTitle=function(e){this.elemA=document.createElement("h1"),this.elemA.appendChild(document.createTextNode(e)),this.fragment.firstChild.firstChild.appendChild(this.elemA)},this.htmlText=function(e){var t=new apijs.core.bbcode;t.init(e,apijs.config.dialog.emotes),this.fragment.firstChild.firstChild.appendChild(t.getFragment())},this.htmlButtonOk=function(){this.elemA=document.createElement("div"),this.elemA.setAttribute("class","control"),this.elemB=document.createElement("button"),this.elemB.setAttribute("type","button"),this.elemB.setAttribute("onclick","apijs.dialog.actionClose(true);"),this.elemB.setAttribute("class","confirm"),this.elemB.appendChild(document.createTextNode(apijs.i18n.translate("buttonOk"))),this.elemA.appendChild(this.elemB),this.fragment.firstChild.firstChild.appendChild(this.elemA)},this.htmlButtonConfirm=function(e){this.elemA=document.createElement("div"),this.elemA.setAttribute("class","control"),this.elemB=document.createElement("button"),this.elemB.setAttribute("type",e),this.elemB.setAttribute("class","confirm"),"submit"!==e&&this.elemB.setAttribute("onclick","apijs.dialog.actionConfirm();"),this.elemB.appendChild(document.createTextNode(apijs.i18n.translate("buttonConfirm"))),this.elemA.appendChild(this.elemB),this.elemB=document.createElement("button"),this.elemB.setAttribute("type","button"),this.elemB.setAttribute("class","cancel"),this.elemB.setAttribute("onclick","apijs.dialog.actionClose(true);"),this.elemB.appendChild(document.createTextNode(apijs.i18n.translate("buttonCancel"))),this.elemA.appendChild(this.elemB),this.fragment.firstChild.firstChild.appendChild(this.elemA)},this.htmlButtonNavigation=function(){var e=null===apijs.config.dialog.imagePrev||null===apijs.config.dialog.imageNext;this.elemA=document.createElement("div"),this.elemA.setAttribute("class",e?"navigation txt":"navigation img"),this.elemB=document.createElement("button"),this.elemB.setAttribute("type","button"),this.elemB.setAttribute("disabled","disabled"),this.elemB.setAttribute("onclick","apijs.slideshow.actionPrev();"),this.elemB.setAttribute("id","prev"),e?this.elemB.appendChild(document.createTextNode(apijs.i18n.translate("buttonPrev"))):(this.elemC=document.createElement("img"),this.elemC.setAttribute("src",apijs.config.dialog.imagePrev.src),this.elemC.setAttribute("width",apijs.config.dialog.imagePrev.width),this.elemC.setAttribute("height",apijs.config.dialog.imagePrev.height),this.elemC.setAttribute("alt",apijs.i18n.translate("buttonPrev")),this.elemB.appendChild(this.elemC)),this.elemA.appendChild(this.elemB),this.elemB=document.createElement("button"),this.elemB.setAttribute("type","button"),this.elemB.setAttribute("disabled","disabled"),this.elemB.setAttribute("onclick","apijs.slideshow.actionNext();"),this.elemB.setAttribute("id","next"),e?this.elemB.appendChild(document.createTextNode(apijs.i18n.translate("buttonNext"))):(this.elemC=document.createElement("img"),this.elemC.setAttribute("src",apijs.config.dialog.imageNext.src),this.elemC.setAttribute("width",apijs.config.dialog.imageNext.width),this.elemC.setAttribute("height",apijs.config.dialog.imageNext.height),this.elemC.setAttribute("alt",apijs.i18n.translate("buttonNext")),this.elemB.appendChild(this.elemC)),this.elemA.appendChild(this.elemB),this.fragment.firstChild.firstChild.appendChild(this.elemA)},this.htmlButtonClose=function(){var e=null===apijs.config.dialog.imageClose;this.elemA=document.createElement("div"),this.elemA.setAttribute("class",e?"close txt":"close img"),this.elemB=document.createElement("button"),this.elemB.setAttribute("type","button"),this.elemB.setAttribute("onclick","apijs.dialog.actionClose(true);"),this.elemB.setAttribute("class","close"),e?this.elemB.appendChild(document.createTextNode(apijs.i18n.translate("buttonClose"))):(this.elemC=document.createElement("img"),this.elemC.setAttribute("src",apijs.config.dialog.imageClose.src),this.elemC.setAttribute("width",apijs.config.dialog.imageClose.width),this.elemC.setAttribute("height",apijs.config.dialog.imageClose.height),this.elemC.setAttribute("alt",apijs.i18n.translate("buttonClose")),this.elemB.appendChild(this.elemC)),this.elemA.appendChild(this.elemB),this.fragment.firstChild.firstChild.appendChild(this.elemA)},this.htmlLinkReload=function(){this.elemA=document.createElement("p"),this.elemA.setAttribute("class","reload"),this.elemA.appendChild(document.createTextNode(apijs.i18n.translate("operationTooLong"))),this.elemB=document.createElement("a"),this.elemB.setAttribute("href",location.href),this.elemB.appendChild(document.createTextNode(apijs.i18n.translate("reloadLink"))),this.elemA.appendChild(this.elemB),this.elemA.appendChild(document.createTextNode(".")),this.elemB=document.createElement("br"),this.elemA.appendChild(this.elemB),this.elemA.appendChild(document.createTextNode(apijs.i18n.translate("warningLostChange"))),document.getElementById("box").appendChild(this.elemA)},this.htmlFormUpload=function(e,t){this.elemA=document.createElement("iframe"),apijs.config.navigator&&this.elemA.setAttribute("src",apijs.config.dialog.imageUpload.src),this.elemA.setAttribute("sandbox","allow-forms allow-same-origin"),this.elemA.setAttribute("name","iframeUpload."+t),this.elemA.setAttribute("style","display:none;"),this.elemA.setAttribute("id","iframeUpload"),document.body.appendChild(this.elemA),this.elemA=document.createElement("div"),this.elemB=document.createElement("input"),this.elemB.setAttribute("type","hidden"),this.elemB.setAttribute("name","UPLOAD_PROGRESS"),this.elemB.setAttribute("value",t),this.elemA.appendChild(this.elemB),this.elemB=document.createElement("input"),this.elemB.setAttribute("type","file"),this.elemB.setAttribute("name",e),this.elemB.setAttribute("onchange","document.getElementById('box').lastChild.firstChild.focus();"),this.elemA.appendChild(this.elemB),this.fragment.firstChild.firstChild.appendChild(this.elemA)},this.htmlProgressBar=function(){apijs.config.navigator?(this.elemA=document.createElement("object"),this.elemA.setAttribute("data",apijs.config.dialog.imageUpload.src),this.elemA.setAttribute("type","image/svg+xml"),this.elemA.setAttribute("width",apijs.config.dialog.imageUpload.width),this.elemA.setAttribute("height",apijs.config.dialog.imageUpload.height),this.elemA.setAttribute("id","progressbar"),this.fragment.firstChild.firstChild.appendChild(this.elemA)):apijs.config.navigator||(this.elemA=document.createElement("embed"),this.elemA.setAttribute("src",apijs.config.dialog.imageUpload.src),this.elemA.setAttribute("type","image/svg+xml"),this.elemA.setAttribute("wmode","transparent"),this.elemA.setAttribute("width",apijs.config.dialog.imageUpload.width),this.elemA.setAttribute("height",apijs.config.dialog.imageUpload.height),this.elemA.setAttribute("id","progressbar"),this.fragment.firstChild.firstChild.appendChild(this.elemA))},this.htmlPhoto=function(e,t,i,n,a,s){var o=this.updateWindowSize(e,t,i);this.elemA=document.createElement("dl"),this.elemB=document.createElement("dt"),!apijs.config.dialog.showFullsize||o.width===e&&o.height===t?(this.elemC=document.createElement("img"),this.elemC.setAttribute("width",o.width),this.elemC.setAttribute("height",o.height),this.elemC.setAttribute("alt",""),document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")?this.elemC.setAttribute("class","loading svg"):this.elemC.setAttribute("class","loading"),this.elemC.setAttribute("id","topho")):(this.elemC=document.createElement("a"),this.elemC.setAttribute("href",i),this.elemC.setAttribute("onclick","window.open(this.href); this.blur(); return false;"),this.elemD=document.createElement("img"),this.elemD.setAttribute("width",o.width),this.elemD.setAttribute("height",o.height),this.elemD.setAttribute("alt",""),document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")?this.elemD.setAttribute("class","loading svg resized"):this.elemD.setAttribute("class","loading resized"),this.elemD.setAttribute("id","topho"),this.elemC.appendChild(this.elemD),this.elemC.appendChild(document.createElement("span"))),this.elemB.appendChild(this.elemC),this.elemA.appendChild(this.elemB),this.elemB=document.createElement("dd"),"false"===n&&"false"===a||(this.elemC=document.createElement("span"),"false"!==n&&"auto"!==n&&"false"!==a?this.elemC.appendChild(document.createTextNode(n+" ("+a+")")):"false"!==n&&"auto"!==n?this.elemC.appendChild(document.createTextNode(n)):"auto"===n&&"false"!==a?this.elemC.appendChild(document.createTextNode(o.id+" ("+a+")")):"auto"===n?this.elemC.appendChild(document.createTextNode(o.id)):"false"!==a&&this.elemC.appendChild(document.createTextNode("("+a+")")),this.elemB.appendChild(this.elemC)),this.elemB.appendChild(document.createTextNode(" "+s+" ")),apijs.config.dialog.savePhoto&&(this.elemC=document.createElement("a"),this.elemC.setAttribute("href",apijs.config.dialog.filePhoto+"?id="+o.id),this.elemC.setAttribute("type",this.searchMimeType(i)),this.elemC.setAttribute("class","download"),this.elemC.appendChild(document.createTextNode(apijs.i18n.translate("downloadLink"))),this.elemB.appendChild(this.elemC)),this.elemA.appendChild(this.elemB),this.fragment.firstChild.firstChild.appendChild(this.elemA)},this.htmlVideo=function(e,t,i,n){var a,s,o,l=this.searchMimeType(e),r=this.updateWindowSize(apijs.config.dialog.videoWidth,apijs.config.dialog.videoHeight,e);if(this.elemA=document.createElement("dl"),this.elemB=document.createElement("dt"),this.elemC=document.createElement("video"),this.elemC.setAttribute("width",r.width),this.elemC.setAttribute("height",r.height),this.elemC.setAttribute("controls","controls"),apijs.config.dialog.videoAutoplay&&this.elemC.setAttribute("autoplay","autoplay"),this.elemC.setAttribute("id","topho"),0<e.indexOf("#"))for((s=(s=e.slice(e.indexOf("#")+1)).split(",")).unshift(e.slice(e.lastIndexOf(".")+1,e.lastIndexOf("#"))),a=0;a<s.length;a++)this.elemD=document.createElement("source"),this.elemD.setAttribute("src",e.slice(0,e.lastIndexOf("."))+"."+s[a]),this.elemD.setAttribute("type",this.searchMimeType(s[a])),this.elemC.appendChild(this.elemD);else this.elemD=document.createElement("source"),this.elemD.setAttribute("src",e),this.elemD.setAttribute("type",l),this.elemC.appendChild(this.elemD);"function"!=typeof this.elemC.pause&&((o=new apijs.core.bbcode).init(apijs.i18n.translate("browserNoVideo",BrowserDetect.browser,BrowserDetect.version,l,navigator.userAgent)),(o=o.getFragment()).firstChild.setAttribute("style","height:"+r.height+"px"),this.elemC.appendChild(o)),this.elemB.appendChild(this.elemC),this.elemA.appendChild(this.elemB),this.elemB=document.createElement("dd"),"false"===t&&"false"===i||(this.elemC=document.createElement("span"),"false"!==t&&"auto"!==t&&"false"!==i?this.elemC.appendChild(document.createTextNode(t+" ("+i+")")):"false"!==t&&"auto"!==t?this.elemC.appendChild(document.createTextNode(t)):"auto"===t&&"false"!==i?this.elemC.appendChild(document.createTextNode(r.id+" ("+i+")")):"auto"===t?this.elemC.appendChild(document.createTextNode(r.id)):"false"!==i&&this.elemC.appendChild(document.createTextNode("("+i+")")),this.elemB.appendChild(this.elemC)),this.elemB.appendChild(document.createTextNode(" "+n+" ")),apijs.config.dialog.saveVideo&&(this.elemC=document.createElement("a"),this.elemC.setAttribute("href",apijs.config.dialog.fileVideo+"?id="+r.id),this.elemC.setAttribute("type",l),this.elemC.setAttribute("class","download"),this.elemC.appendChild(document.createTextNode(apijs.i18n.translate("downloadLink"))),this.elemB.appendChild(this.elemC)),this.elemA.appendChild(this.elemB),this.fragment.firstChild.firstChild.appendChild(this.elemA)}},apijs.core.slideshow=function(){this.currentMedia={album:null,number:null,first:null,prev:null,next:null,last:null},this.gallery=[],this.totals=[],this.init=function(){for(var e,t,i,n=0;null!==document.getElementById(apijs.config.slideshow.ids+"."+n);n++)for(i=-1<document.getElementById(apijs.config.slideshow.ids+"."+n).getAttribute("class").indexOf("hoverload"),t=apijs.config.slideshow.ids+"."+n+".999",document.getElementById(t)?(apijs.config.navigator?document.getElementById(t).addEventListener("click",apijs.slideshow.showMedia.bind(this),!1):document.getElementById(t).setAttribute("onclick","apijs.slideshow.showMedia(this.getAttribute('id')); return false;"),this.gallery[n]=0):this.gallery[n]=!1,e=0;null!==document.getElementById(apijs.config.slideshow.ids+"."+n+"."+e);e++)t=apijs.config.slideshow.ids+"."+n+"."+e,apijs.config.navigator?i&&!1!==this.gallery[n]?(document.getElementById(t).addEventListener("click",apijs.slideshow.showMedia.bind(this),!1),document.getElementById(t).addEventListener("mouseover",apijs.slideshow.showMedia.bind(this),!1)):document.getElementById(t).addEventListener("click",apijs.slideshow.showMedia.bind(this),!1):i&&!1!==this.gallery[n]?(document.getElementById(t).setAttribute("onclick","apijs.slideshow.showMedia(this.getAttribute('id')); return false;"),document.getElementById(t).setAttribute("onmouseover","apijs.slideshow.showMedia(this.getAttribute('id')); return false;")):document.getElementById(t).setAttribute("onclick","apijs.slideshow.showMedia(this.getAttribute('id')); return false;"),this.totals[n]=e},this.showMedia=function(e){var t={};"string"!=typeof e?(e.preventDefault(),"a"===e.target.nodeName.toLowerCase()?(t.id=e.target.getAttribute("id"),t.url=e.target.getAttribute("href"),t.conf=e.target.querySelector("input").getAttribute("value").split("|")):(t.id=e.target.parentNode.getAttribute("id"),t.url=e.target.parentNode.getAttribute("href"),t.conf=e.target.parentNode.querySelector("input").getAttribute("value").split("|")),t.alt="img"===e.target.nodeName.toLowerCase()?e.target.getAttribute("alt"):""):(t.id=e,t.url=document.getElementById(t.id).getAttribute("href"),t.conf=document.getElementById(t.id).querySelector("input").getAttribute("value").split("|"),t.alt=document.getElementById(t.id).querySelector("img"),t.alt=t.alt?t.alt.getAttribute("alt"):""),t.classNames=document.getElementById(t.id.slice(0,t.id.lastIndexOf("."))).getAttribute("class"),t.album=parseInt(t.id.split(".")[1],10),t.number=parseInt(t.id.split(".")[2],10),t.classNames=t.classNames.replace("gallery","slideshow").replace("album","slideshow"),!1!==this.gallery[t.album]&&(1<t.conf.length||t.conf.length<7)?"string"!=typeof e&&e.target.hasAttribute("class")&&-1<e.target.getAttribute("class").indexOf("actif")||(null!==apijs.dialog.classNames||6!==t.conf.length&&4!==t.conf.length?(null!==apijs.dialog.classNames||5!==t.conf.length&&3!==t.conf.length?this.updateGallery(t):t.number=this.gallery[t.album],this.showDialog(t)):this.updateGallery(t)):5===t.conf.length||3===t.conf.length?this.showDialog(t):apijs.config.debug&&apijs.dialog.dialogInformation(apijs.i18n.translate("debugInvalidUse"),"[pre]TheSlideshow » showMedia[br]"+apijs.i18n.translate("debugNotRecognizedConfig")+"[/pre]")},this.updateGallery=function(e){var t,i,n;if(6===e.conf.length&&0<e.conf[0].length&&0<e.conf[1].length&&0<e.conf[2].length&&0<e.conf[3].length&&0<e.conf[4].length){for(t=apijs.config.slideshow.ids+"."+e.album,document.getElementById(t+".999").setAttribute("href",document.getElementById(e.id).getAttribute("href")),document.getElementById(t+".999").querySelector("img").setAttribute("alt",e.alt),document.getElementById(t+".999").querySelector("img").setAttribute("src",e.conf.shift()),document.getElementById(t+".999").querySelector("input").setAttribute("value",e.conf.join("|")),i=document.getElementById(t).querySelectorAll("img"),n=0;n<i.length;n++)i[n].hasAttribute("class")&&-1<i[n].getAttribute("class").indexOf("actif")&&i[n].removeAttribute("class");document.getElementById(e.id).querySelector("img").setAttribute("class","actif"),this.gallery[e.album]=e.number}else if(apijs.config.debug&&6===e.conf.length)apijs.dialog.dialogInformation(apijs.i18n.translate("debugInvalidConfig"),"[pre]TheSlideshow » changePhoto[br]➩ (string) url : "+e.conf[0]+"[br]➩ (number) width : "+e.conf[1]+"[br]➩ (number) height : "+e.conf[2]+"[br]➩ (string) date : "+e.conf[3]+"[br]➩ (string) legend : "+e.conf[4]+"[/pre]");else if(4===e.conf.length&&0<e.conf[0].length&&0<e.conf[1].length&&0<e.conf[2].length){for(t=apijs.config.slideshow.ids+"."+e.album,document.getElementById(t+".999").setAttribute("href",document.getElementById(e.id).getAttribute("href")),document.getElementById(t+".999").querySelector("img").setAttribute("alt",e.alt),document.getElementById(t+".999").querySelector("img").setAttribute("src",e.conf.shift()),document.getElementById(t+".999").querySelector("input").setAttribute("value",e.conf.join("|")),i=document.getElementById(t).querySelectorAll("img"),n=0;n<i.length;n++)i[n].hasAttribute("class")&&-1<i[n].getAttribute("class").indexOf("actif")&&i[n].removeAttribute("class");document.getElementById(e.id).querySelector("img").setAttribute("class","actif"),this.gallery[e.album]=e.number}else apijs.config.debug&&4===e.conf.length&&apijs.dialog.dialogInformation(apijs.i18n.translate("debugInvalidConfig"),"[pre]TheSlideshow » changePhoto[br]➩ (string) url : "+e.conf[0]+"[br]➩ (string) date : "+e.conf[1]+"[br]➩ (string) legend : "+e.conf[2]+"[/pre]")},this.showDialog=function(e){5===e.conf.length&&0<e.conf[0].length&&0<e.conf[1].length&&0<e.conf[2].length&&0<e.conf[3].length?(e.name=e.conf[2],e.date=e.conf[3],e.legend=e.conf[4],e.width=parseInt(e.conf[0],10),e.height=parseInt(e.conf[1],10),apijs.dialog.dialogPhoto(e.width,e.height,e.url,e.name,e.date,e.legend,e.classNames),this.showNavigation(e.album,e.number)):apijs.config.debug&&5===e.conf.length?apijs.dialog.dialogInformation(apijs.i18n.translate("debugInvalidConfig"),"[pre]TheSlideshow » showMedia[br]➩ (number) width : "+e.conf[0]+"[br]➩ (number) height : "+e.conf[1]+"[br]➩ (string) date : "+e.conf[2]+"[br]➩ (string) legend : "+e.conf[3]+"[/pre]"):3===e.conf.length&&0<e.conf[0].length&&0<e.conf[1].length?(e.name=e.conf[0],e.date=e.conf[1],e.legend=e.conf[2],apijs.dialog.dialogVideo(e.url,e.name,e.date,e.legend,e.classNames),this.showNavigation(e.album,e.number)):apijs.config.debug&&3===e.conf.length&&apijs.dialog.dialogInformation(apijs.i18n.translate("debugInvalidConfig"),"[pre]TheSlideshow » showMedia[br]➩ (string) date : "+e.conf[0]+"[br]➩ (string) legend : "+e.conf[1]+"[/pre]")},this.showNavigation=function(e,t){(-1<apijs.dialog.classNames.indexOf("photo slideshow")||-1<apijs.dialog.classNames.indexOf("video slideshow"))&&(this.currentMedia.album=e,this.currentMedia.number=t,this.currentMedia.first=apijs.config.slideshow.ids+"."+this.currentMedia.album+".0",this.currentMedia.prev=apijs.config.slideshow.ids+"."+this.currentMedia.album+"."+(this.currentMedia.number-1),this.currentMedia.next=apijs.config.slideshow.ids+"."+this.currentMedia.album+"."+(this.currentMedia.number+1),this.currentMedia.last=apijs.config.slideshow.ids+"."+this.currentMedia.album+"."+this.totals[this.currentMedia.album],document.getElementById(this.currentMedia.prev)?document.getElementById("prev").removeAttribute("disabled"):this.currentMedia.prev=null,document.getElementById(this.currentMedia.next)?document.getElementById("next").removeAttribute("disabled"):this.currentMedia.next=null)},this.actionFirst=function(){null!==this.currentMedia&&0<this.currentMedia.number&&this.currentMedia.number<=this.totals[this.currentMedia.album]&&this.showMedia(this.currentMedia.first)},this.actionPrev=function(){null!==this.currentMedia&&null!==this.currentMedia.prev&&0<this.currentMedia.number&&this.showMedia(this.currentMedia.prev)},this.actionNext=function(){null!==this.currentMedia&&null!==this.currentMedia.next&&this.currentMedia.number<this.totals[this.currentMedia.album]&&this.showMedia(this.currentMedia.next)},this.actionLast=function(){null!==this.currentMedia&&0<=this.currentMedia.number&&this.currentMedia.number<this.totals[this.currentMedia.album]&&this.showMedia(this.currentMedia.last)}},apijs.core.upload=function(){this.percent=0,this.maxsize=0,this.extensions=null,this.uploadkey=null,this.callback=null,this.callbackParam=null,this.svgTimer=null,this.svgDirection=0,this.svgWaiting=0,this.progressTimer=null,this.progressWaiting=0,this.sendFile=function(e,t,i,n,a,s,o){"string"==typeof e&&"string"==typeof t&&"number"==typeof i&&"object"==typeof n&&n instanceof Array&&"function"==typeof a?(this.callback=a,this.callbackParam=s,this.extensions=n,this.uploadkey=uniqid(),this.maxsize=i,apijs.dialog.dialogFormUpload(e,this.prepareText(i),t,this.uploadkey,o)):apijs.config.debug&&("function"==typeof a&&"string"==typeof a.name&&0<a.name.length&&(a=a.name),apijs.dialog.dialogInformation(apijs.i18n.translate("debugInvalidCall"),"[pre]TheUpload » sendFile[br]➩ (string) title : "+e+"[br]➩ (string) inputname : "+t+"[br]➩ (number) maxsize : "+i+"[br]➩ (array) extensions : "+n+"[br]➩ (function) callback : "+a+"[br]➩ (mixed) callbackParam : "+s+"[br]➩ (string) icon : "+o+"[/pre]"))},this.deleteFile=function(e,t,i,n,a,s){"string"==typeof e&&"string"==typeof t&&"string"==typeof i&&"function"==typeof n?(this.callback=n,this.callbackParam=a,apijs.dialog.dialogConfirmation(e,t,apijs.upload.actionDelete,i,s="string"!=typeof s?"delete":s)):apijs.config.debug&&("function"==typeof n&&"string"==typeof n.name&&0<n.name.length&&(n=n.name),apijs.dialog.dialogInformation(apijs.i18n.translate("debugInvalidCall"),"[pre]TheUpload » deleteFile[br]➩ (string) title : "+e+"[br]➩ (string) text : "+t+"[br]➩ (string) fileid : "+i+"[br]➩ (function) callback : "+n+"[br]➩ (mixed) callbackParam : "+a+"[br]➩ (string) icon : "+s+"[/pre]"))},this.prepareText=function(e){var t=this.extensions[this.extensions.length-1],e="*"===t?apijs.i18n.translate("uploadAllType",e):1===this.extensions.length?apijs.i18n.translate("uploadOneType",t,e):apijs.i18n.translate("uploadMultiType",this.extensions.slice(0,-1).join(", "),t,e);return e},this.showRetry=function(e,t){var i=this.callback.name,n=document.getElementById("box").querySelector("h1").firstChild.nodeValue;apijs.dialog.dialogInformation(n,e,"eeupload"),document.getElementById("iframeUpload").parentNode.removeChild(document.getElementById("iframeUpload")),"string"!==i&&(i=(i=this.callback.toString().match(/function ([^\(]+)\(/)[0]).slice(9,-1)),(e=document.getElementById("box").querySelector("button")).firstChild.nodeValue=apijs.i18n.translate("buttonRetry"),e.setAttribute("class","back"),e.setAttribute("onclick","apijs.upload.sendFile('"+n+"', '"+t+"', "+this.maxsize+", ['"+this.extensions.toString().replace(/,/g,"','")+"'], "+i+", "+this.callbackParam+");")},this.actionConfirm=function(){var e,t=document.getElementById("box").getElementsByTagName("input")[1],i=t.value.replace("C:\\fakepath\\",""),n=-1,a=1024*this.maxsize*1024,s=this.extensions[this.extensions.length-1];if(i.length<1)document.getElementById("box").getElementsByTagName("input")[1].focus();else if("*"===s||in_array(i.slice(i.lastIndexOf(".")+1).toLowerCase(),this.extensions)){if(!(-1<(n="object"==typeof t.files?t.files[0].size:n)&&a<n))return document.getElementById("iframeUpload").setAttribute("onload","apijs.upload.endUpload();"),this.percent=0,this.svgDirection=0,this.svgWaiting=10,this.progressWaiting=15,this.svgTimer=window.setInterval(apijs.upload.animGeneric.bind(this),50),this.progressTimer=window.setTimeout(apijs.upload.uploadRealTime,1e3),window.setTimeout(function(){apijs.dialog.dialogProgress(document.getElementById("box").querySelector("h1").firstChild.nodeValue,apijs.i18n.translate("uploadInProgress"),apijs.dialog.classNames.replace(/upload|lock/,""))},1),!0;a=1048576<a?(n=apijs.i18n.translate("uploadBadSizeM",(n/1048576).toFixed(2)),apijs.i18n.translate("uploadBadSizeM",(a/1048576).toFixed(2))):(n=apijs.i18n.translate("uploadBadSizeK",(n/1024).toFixed(2)),apijs.i18n.translate("uploadBadSizeK",(a/1024).toFixed(2))),e=apijs.i18n.translate("uploadBadSizeDecimal"),n=n.replace(".00","").replace(".",e),a=a.replace(".00","").replace(".",e),this.showRetry(apijs.i18n.translate("uploadBadSize",i,n,a),t.getAttribute("name"))}else 0<i.lastIndexOf("/")?i=i.slice(i.lastIndexOf("/")+1):0<i.lastIndexOf("\\")&&(i=i.slice(i.lastIndexOf("\\")+1)),s=this.extensions.length<1?apijs.i18n.translate("uploadBadOneType",i,s):apijs.i18n.translate("uploadBadMultiType",i,this.extensions.slice(0,-1).join(", "),s),this.showRetry(s,t.getAttribute("name"));return!1},this.actionDelete=function(e){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState&&200===s.status){var e,t,i,n,a=document.getElementById("box").querySelector("h1").firstChild.nodeValue;try{t=(e=s.responseXML).getElementsByTagName("status")[0].firstChild.nodeValue,i=e.getElementsByTagName("message")[0].firstChild.nodeValue,n="success"===t?"information":"error",apijs.dialog.dialogInformation(a,i,n),"success"===t&&apijs.upload.callback(apijs.upload.callbackParam)}catch(e){apijs.dialog.dialogInformation(a,"[pre]"+e+"[/pre]","error")}}else 4===s.readyState&&200!==s.status&&apijs.dialog.dialogInformation(document.getElementById("box").querySelector("h1").firstChild.nodeValue,apijs.i18n.translate("deleteNotFound",s.status,s.statusText),"error")},s.open("GET",apijs.config.dialog.fileUpload+"?delete="+e,!0),s.send(null)},this.uploadRealTime=function(){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState&&200===s.status&&0<apijs.upload.progressWaiting&&apijs.upload.percent<100)try{var e,t,i,n=s.responseXML,a=n.getElementsByTagName("status")[0].firstChild.nodeValue;"uploading"===a?(e=parseInt(n.getElementsByTagName("percent")[0].firstChild.nodeValue,10),t=n.getElementsByTagName("rate")[0].firstChild.nodeValue,i=n.getElementsByTagName("time")[0].firstChild.nodeValue,0<e&&e<100&&e>apijs.upload.percent&&(apijs.upload.svgTimer&&clearInterval(apijs.upload.svgTimer),t=!("false"===t||t.length<1)&&parseInt(t,10),i=!("false"===i||i.length<1)&&i,apijs.upload.animToValue(e,t,i)),apijs.upload.percent=e,apijs.upload.progressTimer=window.setTimeout(apijs.upload.uploadRealTime,1e3)):"pending"===a&&(--apijs.upload.progressWaiting,apijs.upload.progressTimer=window.setTimeout(apijs.upload.uploadRealTime,1e3))}catch(e){--apijs.upload.progressWaiting,apijs.upload.progressTimer=window.setTimeout(apijs.upload.uploadRealTime,1e3),"object"==typeof console&&console.log("apijs.upload.uploadRealTime: "+s.status+" "+s.statusText+" "+e)}else 4===s.readyState&&200!==s.status&&"object"==typeof console&&console.log("apijs.upload.uploadRealTime: "+s.status+" "+s.statusText)},s.open("GET",apijs.config.dialog.fileUpload+"?realtime="+apijs.upload.uploadkey,!0),s.send(null)},this.endUpload=function(){if(this.progressTimer&&clearTimeout(this.progressTimer),this.svgTimer&&clearInterval(this.svgTimer),null!==this.extensions){var t,i,n;this.percent=100,this.maxsize=0,this.extensions=null,this.svgTimer=null,this.svgDirection=0,this.svgWaiting=0,this.progressTimer=null,this.progressWaiting=0;try{if(apijs.config.navigator)i=(t=window.frames["iframeUpload."+this.uploadkey].document).querySelector("status").firstChild.nodeValue,n=t.querySelector("message").firstChild.nodeValue;else if(t=(t=window.frames["iframeUpload."+this.uploadkey].document.documentElement.querySelector("body").innerHTML).replace(/[\r\n\t]|<[^>]+>|&[a-z]+;/g,""),i=/status(.+)\/status/i.test(t),i=RegExp.$1,n=/message(.+)\/message/i.test(t),n=RegExp.$1,i.length<1)throw"TypeError: status is undefined";apijs.config.navigator&&document.getElementById("progressbar")&&(document.getElementById("iframeUpload").removeAttribute("onload"),document.getElementById("iframeUpload").setAttribute("src",apijs.config.dialog.imageUpload.src)),"success"===i?(this.animToValue(100),window.setTimeout(function(){this.callback(this.uploadkey,this.callbackParam)}.bind(this),1500)):apijs.dialog.dialogInformation(document.getElementById("box").querySelector("h1").firstChild.nodeValue,n,"eeupload")}catch(e){try{return n=apijs.config.navigator?(i=(t=window.frames["iframeUpload."+this.uploadkey].document).querySelector("title").firstChild.nodeValue,t.querySelector("p").firstChild.nodeValue):(t=window.frames["iframeUpload."+this.uploadkey].document.documentElement.innerHTML,i=/<title>(.+)<\/title>/i.test(t),i=RegExp.$1,n=/<p>(.+)<\/p>/i.test(t),RegExp.$1),void apijs.dialog.dialogInformation(i,n,"eeupload")}catch(e){"object"==typeof console&&console.log("apijs.upload.endUpload: "+e)}apijs.dialog.dialogInformation(document.getElementById("box").querySelector("h1").firstChild.nodeValue,"[pre]"+e+"[/pre]","eeupload")}}},this.animGeneric=function(){if(this.percent<100&&document.getElementById("progressbar")){try{var e=(apijs.config.navigator?document.getElementById("progressbar").getSVGDocument():document.getElementById("progressbar").getSVGDocument().rootElement).getElementById("bar")}catch(e){return void--this.svgWaiting}0===this.svgDirection?(e.setAttribute("x",parseFloat(e.getAttribute("x"),10)+1+"%"),parseInt(e.getAttribute("x"),10)>=100-parseFloat(e.getAttribute("width"),10)&&(this.svgDirection=1)):(e.setAttribute("x",parseFloat(e.getAttribute("x"),10)-1+"%"),parseInt(e.getAttribute("x"),10)<=0&&(this.svgDirection=0))}else this.svgWaiting=0,clearInterval(this.svgTimer)},this.animToValue=function(e,t,i){try{var n=(apijs.config.navigator?document.getElementById("progressbar").getSVGDocument():document.getElementById("progressbar").getSVGDocument().rootElement).getElementById("bar"),a=(apijs.config.navigator?document.getElementById("progressbar").getSVGDocument():document.getElementById("progressbar").getSVGDocument().rootElement).getElementById("text")}catch(e){return}e<100?("0"!==n.getAttribute("x")&&n.setAttribute("x","0"),n.setAttribute("width",e+"%"),"number"==typeof t&&"string"==typeof i?a.firstChild.replaceData(0,a.firstChild.length,apijs.i18n.translate("uploadRateTime",e,t,i)):"number"==typeof t?a.firstChild.replaceData(0,a.firstChild.length,apijs.i18n.translate("uploadRate",e,t)):"string"==typeof i?a.firstChild.replaceData(0,a.firstChild.length,apijs.i18n.translate("uploadTime",e,i)):a.firstChild.replaceData(0,a.firstChild.length,e+"%")):(n.setAttribute("x","0"),n.setAttribute("width","101%"),a.firstChild.replaceData(0,a.firstChild.length,"100%"))}};